# Документация модуля: docs/processed/api/true_api/requests.md

## История изменений
- 2025-09-16 — первичная структуризация запросов True API для проекта по заказу КМ (agent).

## Что должен делать код в общих чертах
Модуль `TrueApiClient` отвечает за интеграцию с True API ГИС МТ: он реализует единую аутентификацию по УКЭП, ведёт обмен документами и чеками, управляет информацией о кодах маркировки и агрегатах и предоставляет вспомогательные справочники для товарной группы «Лёгкая промышленность».【F:docs/reference/true_api/extracted/true_api.txt†L1118-L1144】【F:docs/reference/true_api/extracted/true_api.txt†L7296-L7338】【F:docs/reference/true_api/extracted/true_api.txt†L50348-L50404】
Библиотека должна следить за лимитами True API (≤50 запросов/секунда, ≤30 MB на документ, ≤30 000 КИ в теле) и корректно выставлять заголовки Accept/Authorization для разных типов ответов (JSON, ZIP).【F:docs/reference/true_api/extracted/true_api.txt†L852-L868】【F:docs/reference/true_api/extracted/true_api.txt†L994-L995】【F:docs/reference/true_api/extracted/true_api.txt†L1096-L1108】
Кроме базовых операций, модуль агрегирует витрину методов для проверки статусов КИ, работы с заданиями `dispenser`, выгрузками в ЭДО и справочниками Национального каталога, чтобы фронтенд мог отображать актуальное состояние карточек товаров без дополнительных интеграций.【F:docs/reference/true_api/extracted/true_api.txt†L50348-L50420】【F:docs/reference/true_api/extracted/true_api.txt†L54182-L54228】【F:docs/reference/true_api/extracted/true_api.txt†L54786-L54826】

## Последовательность действий в коде
1) Получить базовый URL стенда и Accept-профиль из конфигурации, проверив лимиты и параметры соединения.【F:docs/reference/true_api/extracted/true_api.txt†L852-L868】【F:docs/reference/true_api/extracted/true_api.txt†L1096-L1108】
2) Запросить UUID и строку `data` через `GET /auth/key`, подписать `data` УКЭП и обменять подпись на токен `POST /auth/simpleSignIn`.【F:docs/reference/true_api/extracted/true_api.txt†L1118-L1128】【F:docs/reference/true_api/extracted/true_api.txt†L1202-L1234】
3) При необходимости получить clientToken СУЗ или иные приватные токены, используя расширенные методы `/auth/simpleSignIn/{omsConnection}` (см. раздел СУЗ).【F:docs/reference/suz/extracted/guides.txt†L1-L40】
4) Формировать документы через единый метод `/lk/documents/create`, прикладывать подпись УКЭП, отслеживать статусы и обрабатывать квитанции (`/api/v4/true-api/doc/list`, `/api/v4/true-api/doc/{docId}/info`).【F:docs/reference/true_api/extracted/true_api.txt†L7296-L7338】【F:docs/reference/true_api/extracted/true_api.txt†L50348-L50404】
5) Поддерживать операции с КИ и агрегатами (`/cises/search`, `/documents/aggregation/create`, `/doc/cises`) для контроля жизненного цикла кодов. 【F:docs/reference/true_api/extracted/true_api.txt†L51520-L51542】【F:docs/reference/true_api/extracted/true_api.txt†L7296-L7338】【F:docs/reference/true_api/extracted/true_api.txt†L53592-L53634】
6) Интегрироваться с витринами и справочниками (`/nk/*`, `/agreement-registry/*`, `/warehouse/*`) для наполнения интерфейса данными НК и складских остатков.【F:docs/reference/true_api/extracted/true_api.txt†L54786-L54826】【F:docs/reference/true_api/extracted/true_api.txt†L52076-L52118】
7) Обрабатывать задания на выгрузку и логи (`/dispenser/tasks`, `/dispenser/results`) для построения отчётов и мониторинга проблемных документов.【F:docs/reference/true_api/extracted/true_api.txt†L53318-L53412】

## Карта глобальных переменных
| Имя | Тип | Значение по умолчанию | Экспортируется | Назначение | Используется в |
|---|---|---|:---:|---|---|
| `TRUE_API_BASE_SANDBOX` | str | `https://markirovka.sandbox.crptech.ru/api/v4/true-api` | да | Базовый URL песочницы для ЛП; переключается между v3/v4 по поддерживаемым методам. | Аутентификация, документы, справочники. 【F:docs/reference/true_api/extracted/true_api.txt†L858-L868】|
| `TRUE_API_BASE_PROD` | str | `https://markirovka.crpt.ru/api/v4/true-api` | да | Промышленный контур True API. | Все публичные методы после вывода в прод. 【F:docs/reference/true_api/extracted/true_api.txt†L864-L868】|
| `TRUE_API_ACCEPT_HEADER` | str | `*/*` | да | Универсальный Accept для смешанных ответов JSON/ZIP. | Все методы, особенно `/doc/list` и выгрузки. 【F:docs/reference/true_api/extracted/true_api.txt†L1096-L1104】|
| `TRUE_API_REQUEST_LIMIT` | int | `50` | нет | Жёсткий лимит запросов в секунду на УОТ; используется в rate limiter-е клиента. | Контроль параллельных запросов. 【F:docs/reference/true_api/extracted/true_api.txt†L852-L855】|
| `TRUE_API_MAX_DOC_SIZE_MB` | int | `30` | нет | Граница размера документа при загрузке в True API. | Проверка документов перед отправкой. 【F:docs/reference/true_api/extracted/true_api.txt†L994-L995】|
| `TRUE_API_MAX_CIS_PER_DOC` | int | `30000` | нет | Контроль суммарного числа КИ в одном документе. | Валидация пакетной загрузки КМ. 【F:docs/reference/true_api/extracted/true_api.txt†L994-L995】|

## Карта функций
| Метод | URL | Контекст из документа |
|---|---|---|
| GET | `/auth/key` | Сервер отвечает на запрос сообщением с кодом 200 (ОК), либо сообщением об ошибке. |
| POST | `/auth/simpleSignIn` | 1.5.2. Получение ключа сессии при единой аутентификации |
| GET | `/elk/crm-api/documents` | 2.1.2. Шаг 2: получение сведений по черновикам договоров между УОТ и ГИС МТ |
| GET | `/elk/crm-api/document?guid={id}` | 2.1.3. Шаг 3: получение (выгрузка) черновиков договоров для подписания УОТ |
| POST | `/elk/outgoing-documents/{id}/signature` | 2.1.4. Шаг 4: подписание договоров |
| GET | `/elk/outgoing-documents/{edoDocumentId}` | 2.1.5. Шаг 5: выгрузка подписанных договоров |
| GET | `/participants` | С токеном: в ответе возвращается расширенная информация об участнике оборота товаров, если ИНН участника оборота товаров, формирующего запрос, равен ИНН, указанному в запросе. |
| POST | `/api/v3/true-api/mods/info` | Тип приватности: публичный |
| GET | `/api/v3/true-api/mods/list` | Тип приватности: публичный |
| POST | `/api/v3/true-api/mrd/delegation/search` | Метод предназначен для проверки наличия машиночитаемых доверенностей, выданных пользователю, выполняющему запрос. При наличии МЧД метод возвращает о них информацию: ИНН юридического лица / индивидуального предпринимателя, которым выдана МЧД, статус, дату начала и окончания действия МЧД. Тип приватности: приватный |
| GET | `/elk/crm-api/documents` | Тип приватности: приватный |
| GET | `/elk/crm-api/document` | Тип приватности: приватный |
| POST | `/elk/outgoing-documents/{documentId}/signature` | Тип приватности: приватный |
| POST | `/elk/crm-api/prequests` | Тип приватности: приватный |
| — | `/elk/product-groups/balance/all` | Тип приватности: приватный |
| — | `/elk/product-groups/balance` | Тип приватности: приватный |
| POST | `/lk/documents/create` | Ограничение доступа к методу: при отправке запроса с токеном пользователя с ролью «Сотрудник» в ответе вернётся ошибка (подробнее см. в «Памятке по ролевой модели доступа Системы маркировки»). |
| POST | `/documents/aggregation/create` | Тип приватности: приватный |
| POST | `/api/v4/true-api/cises/search` | Тип приватности: c токеном авторизации |
| POST | `/api/v3/true-api/cises/info` | текущий владелец. |
| POST | `/cises/short/list` | Тип приватности: публичный |
| — | `/cises/eaes/info` | Республика Казахстан — товарная группа "Обувные товары". |
| POST | `/cises/eaes/check-export` | Тип приватности: публичный (с использованием токена) |
| POST | `/cises/check` | Метод предназначен для проверки наличия в ГИС МТ указанного КИ с криптографической частью. Метод ограничен по частоте запросов (допустимая частота запросов метода - 2 секунды) и количеству КИ в запросе (максимальное количество КИ в запросе - 1000) и не предназначен для вызова с ККТ при сканировании КИ при розничной реализации. |
| POST | `/cises/history` | Тип приватности: публичный (с использованием токена). |
| POST | `/cises/history/list` | Тип приватности: публичный |
| POST | `/api/v4/true-api/tn-ved/search` | Тип приватности: c токеном авторизации |
| POST | `/api/v4/true-api/product/info` | Тип приватности: публичный |
| GET | `/product/gtin` | Метод возвращает список кодов товаров с возможностью указания параметров фильтрации в запросе. Для товарной группы «Альтернативная табачная продукция» в ответе отсутствует информация по кодам товаров, добавленным с помощью пользовательского интерфейса или через «Метод создания и обновления товаров» раздела «Методы «Национального каталога»». Тип приватности: приватный |
| POST | `/api/v4/true-api/rd/list` | Тип приватности: публичный |
| POST | `/agreement-registry/agreement` | Тип приватности: приватный |
| POST | `/agreement-registry/cancellation` | Покупатели продукции (Оптовик, Розница). |
| GET | `/agreement-registry/agreement/list` | Оператор. |
| POST | `agreement-registry/publish` | Тип приватности: приватный. |
| GET | `/agreement-registry/trusted/{ownerInn}/list` | Оператор. |
| GET | `/agreement-registry/trusted/{ownerInn}` | Тип приватности: публичный (с использованием токена). |
| GET | `agreement-registry/agreement/{id}/trusted-inns` | Оператор. |
| POST | `/cises/gz/info` | Тип приватности: публичный |
| POST | `/warehouse/balance` | Тип приватности: приватный |
| POST | `/warehouse/operations` | Тип приватности: приватный |
| POST | `/api/v3/true-api/product/gtin-weight/cis-count` | Тип приватности: c токеном авторизации участника оборота товаров или Оператора ЭДО. |
| — | `/api/v4/true-api/doc/list` | 6.1. Метод получения списка загруженных документов в ГИС МТ |
| POST | `/api/v3/true-api/receipt/search` | Тип приватности: приватный |
| GET | `/api/v4/true-api/receipt/list` | Тип приватности: приватный |
| — | `/api/v4/true-api/doc/{docId}/info` | Для товарной группы «Духи и туалетная вода» метод возвращает в ответе только КИ из тела документа (см. «Справочник «Типы документов»») без отражения информации о КИ дочерних вложений, входящих в состав агрегирующих КИ: параметры «count_children» и «children» в ответе остаются скрытыми. |
| — | `/api/v4/true-api/receipt/{receiptId}/info` | Получение ошибок по чекам доступно в "Метод получения квитанции результата обработки чека по идентификатору чека". |
| POST | `/document/reprocess` | Тип приватности: приватный |
| POST | `/doc/validator/create` | Тип приватности: публичный |
| POST | `/doc/validator/status` | Тип приватности: публичный |
| — | `/doc/cises` | «Перемаркировка», «Расформирование упаковки», «Трансформация упаковки», «Формирование АТК», «Расформирование АТК», «Вывод из оборота», «Возврат в оборот», «Отгрузка из ЕАЭС с признанием КИ», «Отгрузка из ЕАЭС», «Приёмка отгрузки из ЕАЭС». |
| GET | `/documents/edo/tpr/ud` | Метод возвращает квитанцию результата обработки документов (УПД, УПД(и), УКД, УКД(и), УПД (отгрузка продукции) и предложения об аннулировании УД) в ГИС МТ, которые были отправлены с 15 июля 2020 года. Запрос направляется по одному документу. |
| GET | `/receipt/documents` | Тип приватности: публичный |
| — | `dispenser/tasks` | В случае отсутствия подписанного договора при запросе данных возвращается ошибка 403 (отсутствует доступ к данным, не подписан договор о предоставлении сведений). |
| — | `dispenser/tasks` | Выгрузка предназначена для запроса сведений по ошибкам обработки документов прямой подачи сведений и ЭДО. В параметрах запроса необходимо передать массив идентификаторов документов. Ограничение по количеству запрашиваемых документов: 1000. Для документов ЭДО передаётся полный идентификатор, равный значению, указываемому в "ИдФайл" документа *.xml. Для документов прямой подачи сведений передаётся идентификатор, присвоеный ГИС МТ. |
| — | `dispenser/tasks` | Вывод сведений о КИ осуществляется с учётом установленных фильтров в параметре «params» («Строка параметров задания на выгрузку в формате *.json»). |
| — | `dispenser/tasks` | Вывод сведений осуществляется с учётом установленных фильтров в параметре «params» («Строка параметров задания на выгрузку в формате *.json»). |
| — | `dispenser/tasks` | Вывод сведений о документах осуществляется с учётом установленных фильтров в параметре «params» («Строка параметров задания на выгрузку в формате *.json»). |
| — | `dispenser/tasks` | Сведения о товарах формируются только для потребительской упаковки. При этом в расчётах не учитываются данные, связанные с перемаркированными товарами и остатками товаров. |
| — | `dispenser/tasks` | Вывод сведений о документах осуществляется с учётом установленных фильтров в параметре «params» («Строка параметров задания в формате *.json»). |
| — | `dispenser/tasks` | Вывод сведений осуществляется с учётом установленных фильтров в параметре «params» («Строка параметров задания на выгрузку в формате *.json»). Если по заданным фильтрам не было найдено ни одно ограничение, то выгрузка будет пустой. |
| POST | `dispenser/tasks` | Тип приватности: приватный |
| — | `dispenser/tasks/{taskId}` | Метод предназначен для получения статуса задания на выгрузку по идентификатору задания, полученному в ответе метода «Метод создания нового задания на выгрузку». |
| — | `dispenser/tasks` | 8.5.1. Метод получения статусов заданий на выгрузку |
| — | `dispenser/results` | Данный метод позволяет получить список результирующих идентификаторов выгрузок для скачивания сформированных файлов с данными. |
| — | `dispenser/results/{resultId}/file` | Метод предоставляет возможность скачивания выгрузки в статусе «COMPLETED» («Выполнено») по идентификатору выгрузки, полученному в ответе метода «Метод получения результирующих ID выгрузок данных». |
| — | `dispenser/tasktypes/available_count?taskTypeShortName=краткое название типа выгрузки&pg=название товарной группы` | Метод предназначен для получения информации о числе доступных выгрузок за день по типу задания и товарной группе. |
| — | `dispenser/tasktypes/reports/{report_id}/available_count?pg=название товарной группы` | Метод предназначен для получения информации о числе доступных выгрузок за день по отчёту и товарной группе. |
| DELETE | `/api/v3/true-api/dispenser/results/{resultId}` | Тип приватности: приватный |
| GET | `/api/v4/true-api/edo/inn/{inn}` | Если участник оборота товаров зарегистрирован в ЭДО Лайт, и в качестве основного ЭДО-провайдера указан ЭДО Лайт, то возвращается идентификатор участника оборота товаров вместе с префиксом «2LT-» формата «2LT-<ID участника обмена ЭДО Лайт>» (например: 2LT-572279911). |
| — | `` | Тип приватности: приватный. |
| GET | `/nk/attributes` | Тип приватности: публичный |
| GET | `/nk/brands` | Тип приватности: публичный |
| POST | `/nk/linked-accounts` | Тип приватности: приватный |
| POST | `/nk/linked-accounts-sign` | Тип приватности: приватный |
| POST | `/nk/linked-accounts-documents` | Тип приватности: приватный |
| GET | `/nk/categories` | Тип приватности: публичный |
| GET | `/nk/product` | Тип приватности: публичный |
| GET | `/nk/short-product` | Тип приватности: публичный |
| GET | `/nk/feed-product` | Тип приватности: публичный |
| POST | `/nk/feed-product-sign-pkcs` | Тип приватности: приватный |
| POST | `/nk/feed-product-document` | Тип приватности: публичный |
| POST | `/nk/feed-product-sign` | Тип приватности: публичный |
| GET | `/nk/etagslist` | Тип приватности: приватный |
| GET | `/nk/image` | Тип приватности: публичный |
| GET | `/nk/generate-gtins` | Тип приватности: публичный |
| POST | `/nk/feed` | Тип приватности: публичный |
| GET | `/nk/feed-status` | Тип приватности: публичный |
| GET | `/nk/feed-moderation` | Тип приватности: публичный |
| POST | `/nk/mark-check` | В одном запросе не может быть суммарно указано более 100 КИ и кодов ТН ВЭД. |
| GET | `/nk/linked-gtins` | Тип приватности: публичный |
| POST | `/auth/simpleSignIn/идентификатор внешнего подключения` | Для получения токена для СУЗ в строке запроса указывается параметр «omsConnection» — уникальный идентификатор соединения (внешнего подключения), присвоенный зарегистрированной установке интеграционного решения. |

## Описание функций
### `get_auth_key(base_url: str, session) -> AuthChallenge`
**Назначение.** Получение пары `uuid`/`data` для последующей подписи при единой аутентификации True API.【F:docs/reference/true_api/extracted/true_api.txt†L1118-L1128】
**Параметры.** `base_url` — URL стенда (v3/v4); `session` — HTTP-клиент с TLS и rate-limit. 
**Возвращает.** Структуру `AuthChallenge` с полями `uuid`, `data` и HTTP-код ответа.
**Исключения.** Бросает `AuthenticationError`, если сервер вернул 4xx/5xx или пустую пару.
**Сайд-эффекты.** Логирование попытки аутентификации, счётчик запросов.
**Локальные переменные.**
- `url: str` — итоговый URL запроса `/auth/key`.
- `response` — объект ответа клиента.

### `simple_sign_in(base_url: str, payload: SimpleSignInPayload, session) -> TokenBundle`
**Назначение.** Обмен подписанной строки `data` на JWT или единый `uuidToken` для дальнейших запросов True API.【F:docs/reference/true_api/extracted/true_api.txt†L1202-L1234】
**Параметры.** `base_url` — URL стенда; `payload` — содержит `uuid`, `data`, флаг `unitedToken`, доп. реквизиты; `session` — HTTP-клиент.
**Возвращает.** `TokenBundle` (jwt, uuidToken, истечение).
**Исключения.** `AuthenticationError` при 400/403, `SignatureError` при некорректной подписи.
**Сайд-эффекты.** Кеширование токена, обновление TTL в менеджере сессий.
**Локальные переменные.**
- `url: str` — `/auth/simpleSignIn`.
- `body: dict` — сериализованный payload для JSON.

### `create_document(request: DocumentRequest, session, token) -> DocumentResponse`
**Назначение.** Унифицированная отправка документов (ввод в оборот, отгрузка, вывод и т.д.) через `/lk/documents/create` с учётом товарной группы «Лёгкая промышленность».【F:docs/reference/true_api/extracted/true_api.txt†L7296-L7338】
**Параметры.** `request` — структура с `pg`, `product_document`, `signature`, `type`; `session` — HTTP-клиент; `token` — Bearer JWT/uuidToken.
**Возвращает.** Ответ сервера с идентификатором документа и статусом приёма.
**Исключения.** `ValidationError` при нарушении лимита КИ, `AuthorizationError` при роли «Сотрудник».
**Сайд-эффекты.** Логирование payload (без подписи), постановка задачи мониторинга.
**Локальные переменные.**
- `url: str` — `/lk/documents/create?pg={request.pg}`.
- `headers: dict` — включает `Authorization`, `Content-Type`, `Accept`.

### `list_documents(filters: DocumentListFilter, session, token) -> DocumentList`
**Назначение.** Получение загруженных документов по товарной группе и дате через `/api/v4/true-api/doc/list` для контроля статусов заказов КМ.【F:docs/reference/true_api/extracted/true_api.txt†L50348-L50404】
**Параметры.** `filters` — диапазон дат, статус, тип документа, пагинация; `session`, `token` — HTTP-клиент и аутентификация.
**Возвращает.** Пагинированный список документов с метаданными и идентификаторами.
**Исключения.** `RateLimitError` при превышении лимита, `AuthorizationError` при недействительном токене.
**Сайд-эффекты.** Синхронизация с локальным кешем статусов.
**Локальные переменные.**
- `params: dict` — сериализованные фильтры.
- `response` — JSON ответ True API.

### `reprocess_document(document_id: str, session, token) -> TaskInfo`
**Назначение.** Запрос повторной обработки документа (например, при ошибке проверки УКЭП) через `/document/reprocess`.
**Параметры.** `document_id` — идентификатор документа; `session`, `token` — контекст соединения.
**Возвращает.** Статус постановки в очередь переработки.
**Исключения.** `ProcessingError` при повторных ошибках.
**Сайд-эффекты.** Запись события в журнал инцидентов.
**Локальные переменные.**
- `payload: dict` — содержит `document_id` и причину.

### `create_validator_job(body: ValidatorRequest, session) -> ValidatorTicket`
**Назначение.** Запуск проверки документа перед подачей в True API (`/doc/validator/create`) и отслеживание состояния (`/doc/validator/status`).【F:docs/reference/true_api/extracted/true_api.txt†L51054-L51112】
**Параметры.** `body` — входные данные для валидации; `session` — HTTP-клиент без авторизации.
**Возвращает.** Номер заявки валидации и последующий статус (`OK`/`ERROR`).
**Исключения.** `ValidationError` при некорректном формате.
**Сайд-эффекты.** Нет.
**Локальные переменные.**
- `ticket_id: str` — идентификатор проверки.

### `search_cises(criteria: CisesSearchFilter, session, token) -> CisesPage`
**Назначение.** Поиск кодов маркировки, статусов и истории (методы `/api/v4/true-api/cises/search`, `/cises/history`) для отображения на карточке заказа и проверки статусов ЛП.
**Параметры.** `criteria` — список КИ, статус, диапазоны дат; `session`, `token` — соединение и авторизация.
**Возвращает.** Пагинированный список КИ с текущим владельцем, историей операций, признаком агрегации.【F:docs/reference/true_api/extracted/true_api.txt†L51520-L51542】
**Исключения.** `ValidationError` при превышении лимита (≤1000 КИ).
**Сайд-эффекты.** Кеширование результатов для UI.
**Локальные переменные.**
- `payload: dict` — сериализованный фильтр.

### `dispenser_task_manager` (комплекс функций `create_task`, `get_status`, `download_result`)
**Назначение.** Управление заданиями выгрузок `dispenser` для отчётов и мониторинга (создание, получение статусов, скачивание файлов).【F:docs/reference/true_api/extracted/true_api.txt†L53318-L53412】
**Параметры.** `task_payload`, `task_id`, `result_id` в зависимости от операции.
**Возвращает.** Состояние задания и ссылки на файлы.
**Исключения.** `AuthorizationError` при отсутствии договора, `TaskError` при превышении лимитов.
**Сайд-эффекты.** Создание записей в очереди отчетов, чистка старых результатов.
**Локальные переменные.**
- `params: dict` — фильтры выгрузки.
- `task_response`, `result_response` — ответы API.

### `sync_national_catalog` (обёртки над `/nk/*`)
**Назначение.** Получение справочников НК (атрибуты, бренды, категории, GTIN) из True API для предзаполнения карточек ЛП.【F:docs/reference/true_api/extracted/true_api.txt†L54786-L54826】
**Параметры.** `query` — фильтры; `token` — токен НК/True API; `session` — клиент.
**Возвращает.** Списки справочников и статусы синхронизации.
**Исключения.** `CatalogueError` при неверных ключах доступа.
**Сайд-эффекты.** Обновление локального кеша справочников.
**Локальные переменные.**
- `endpoint: str` — конкретный путь (`/nk/attributes`, `/nk/brands`, и т.д.).

## Описание исполнительной части кода
- Действия при импорте: нет — модуль предоставляет только функции/классы клиента.
- CLI/entrypoints: нет. Используется в сервисах бекенда и воркерах обработки документов.
- Типичный вызов:
  1. `challenge = get_auth_key(base_url, session)` → подпись `challenge.data` УКЭП на фронтенде.
  2. `tokens = simple_sign_in(base_url, signed_payload, session)` → сохранение `jwt`/`uuidToken`.
  3. `create_document(request, session, tokens.jwt)` для подачи документа.
  4. `list_documents(filters, session, tokens.jwt)` и `search_cises(criteria, ...)` для отображения статусов и КИ.
  5. По необходимости `dispenser_task_manager.create_task(...)` для выгрузок и `sync_national_catalog(...)` для обновления справочников.
