# Документация модуля: src/MoySkladClient.php

## Что должен делать код в общих чертах
Класс `MoySkladClient` выполняет HTTP-запросы к API МойСклад с использованием Basic Auth. Он отправляет заголовки `Accept-Encoding: gzip` и `Content-Type: application/json; charset=utf-8`, получая сжатые и корректно закодированные ответы. Клиент предназначен для получения списка товаров по эндпоинту `assortment` и возвращает массив элементов каталога для дальнейшей обработки или отображения.

## Последовательность действий в коде
1) При создании экземпляра сохраняет логин, пароль и базовый URL API.
2) Метод `getAssortment` формирует URL запроса `/entity/assortment`.
3) Логирует попытку обращения к API с указанием логина.
4) Инициализирует cURL, включает приём gzip и задаёт параметры авторизации и заголовки с `UTF-8`.
5) Выполняет запрос и получает ответ сервера.
6) Проверяет наличие ошибок cURL и статус HTTP, записывая детали в лог при сбоях.
7) Декодирует JSON-ответ в массив и возвращает список из ключа `rows`.

## Карта глобальных переменных
нет

## Карта функций
| Имя | Видимость | Сигнатура | Краткое назначение | Исключения | Сайд‑эффекты |
|---|---|---|---|---|---|
| __construct | public | `__construct(string $login, string $password, string $baseUrl = 'https://api.moysklad.ru/api/remap/1.2')` | Сохраняет параметры подключения | нет | нет |
| getAssortment | public | `getAssortment(): array` | Возвращает список элементов ассортимента | RuntimeException | HTTP-запрос к внешнему API (gzip, UTF-8) и запись в лог |

## Описание функций
### __construct
**Назначение.** Инициализирует клиента параметрами авторизации и базовым URL.
**Параметры.**
- `login: string` — логин пользователя МойСклад.
- `password: string` — пароль пользователя МойСклад.
- `baseUrl: string` — адрес API, по умолчанию `https://api.moysklad.ru/api/remap/1.2`.
**Возвращает.** `void`.
**Исключения.** нет.
**Сайд‑эффекты.** нет.
**Локальные переменные.**
- `login: string` — сохраняется в свойство `login`.
- `password: string` — сохраняется в свойство `password`.
- `baseUrl: string` — нормализованный базовый URL.

### getAssortment
**Назначение.** Получает список товаров из МойСклад.
**Параметры.** нет.
**Возвращает.** `array` — массив элементов ассортимента.
**Исключения.** `RuntimeException` при сетевых ошибках или коде ответа не 200.
**Сайд‑эффекты.** Выполняет HTTP-запрос к удалённому API с заголовками `gzip` и `UTF-8`, пишет диагностические сообщения в лог.
**Локальные переменные.**
- `url: string` — полный путь к ресурсу `assortment`.
- `ch: resource` — дескриптор cURL.
- `response: string` — сырой ответ API.
- `status: int` — код состояния HTTP.
- `data: array|null` — декодированный JSON.

## Описание исполнительной части кода
- Действия при импорте: нет.
- CLI/entrypoints: нет.
- Типичный вызов:
  1. `$client = new MoySkladClient($login, $password);`
  2. `$rows = $client->getAssortment();`
